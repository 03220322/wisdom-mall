"use strict";(self["webpackChunkwisdom_mall"]=self["webpackChunkwisdom_mall"]||[]).push([[611],{2611:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"order"},[e("van-nav-bar",{attrs:{title:"我的订单","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("van-tabs",{attrs:{sticky:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tab",{attrs:{name:"all",title:"全部"}}),e("van-tab",{attrs:{name:"payment",title:"待支付"}}),e("van-tab",{attrs:{name:"delivery",title:"待发货"}}),e("van-tab",{attrs:{name:"received",title:"待收货"}}),e("van-tab",{attrs:{name:"comment",title:"待评价"}})],1),t._l(t.list,function(t){return e("OrderListItem",{key:t.order_id,attrs:{item:t}})})],2)},i=[],r=(s(8111),s(7588),s(4180)),l=function(){var t=this,e=t._self._c;return t.item.order_id?e("div",{staticClass:"order-list-item"},[e("div",{staticClass:"tit"},[e("div",{staticClass:"time"},[t._v(t._s(t.item.create_time))]),e("div",{staticClass:"status"},[e("span",[t._v(t._s(t.item.state_text))])])]),e("div",{staticClass:"list"},t._l(t.item.goods,function(s,a){return e("div",{key:a,staticClass:"list-item"},[e("div",{staticClass:"goods-img"},[e("img",{attrs:{src:s.goods_image,alt:""}})]),e("div",{staticClass:"goods-content text-ellipsis-2"},[t._v(" "+t._s(s.goods_name)+" ")]),e("div",{staticClass:"goods-trade"},[e("p",[t._v("¥ "+t._s(s.total_pay_price))]),e("p",[t._v("x "+t._s(s.total_num))])])])}),0),e("div",{staticClass:"total"},[t._v("共 "+t._s(t.item.total_num)+" 件商品，总金额 ¥"+t._s(t.item.total_price))]),e("div",{staticClass:"actions"},[10===t.item.order_status?e("div",[10===t.item.pay_status?e("span",[t._v("立刻付款")]):10===t.item.delivery_status?e("span",[t._v("申请取消")]):20===t.item.delivery_status||30===t.item.delivery_status?e("span",[t._v("确认收货")]):t._e()]):t._e(),30===t.item.order_status?e("div",[e("span",[t._v("评价")])]):t._e()])]):t._e()},n=[],o={props:{item:{type:Object,default:()=>({})}}},d=o,c=s(1656),u=(0,c.A)(d,l,n,!1,null,"d2bf3b34",null),m=u.exports,v={name:"OrderPage",components:{OrderListItem:m},data(){return{active:this.$route.query.dataType||"all",page:1,list:[]}},created(){const t=this.$store&&this.$store.getters&&this.$store.getters.token;t||this.$router.replace({path:"/login",query:{redirect:this.$route.fullPath}})},methods:{async getOrderList(){const t=await(0,r.Nj)(this.active,this.page);let e=[];if(t&&t.data&&t.data.list)e=t.data.list.data||[];else if(t&&t.list)e=t.list.data||[];else if(Array.isArray(t))e=t;else{if(!(t&&t.data&&Array.isArray(t.data)))return void(this.list=[]);e=t.data}e.forEach(t=>{t.total_num=0,Array.isArray(t.goods)&&t.goods.forEach(e=>{t.total_num+=e.total_num||0})}),this.list=e}},watch:{active:{immediate:!0,handler(){this.getOrderList()}}}},_=v,p=(0,c.A)(_,a,i,!1,null,"5cc59f94",null),f=p.exports},4180:function(t,e,s){s.d(e,{Nj:function(){return l},O2:function(){return i},Z7:function(){return r}});var a=s(5720);const i=(t,e)=>a.A.get("/checkout/order",{params:{mode:t,delivery:20,couponId:0,isUsePoints:0,...e}}),r=(t,e)=>a.A.post("/checkout/submit",{mode:t,delivery:20,couponId:0,payType:10,isUsePoints:0,...e}),l=(t,e)=>a.A.get("/order/list",{params:{dataType:t,page:e}})}}]);
//# sourceMappingURL=611.6bd62e8c.js.map